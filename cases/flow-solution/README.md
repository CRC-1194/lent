# Usage of flow-solution test cases
NOTE: 2D variants of the test cases are **not** up-to-date

## Organization of test cases
Each test case, e.g. the stationary droplet, contains a subfolder for its two-dimensional
and three-dimensional variant. Each variant consists of a parametrized (or templated)
OpenFOAM case following the naming convention *templateCase_casename* (Note: the *runParameterStudy.sh*
script expects to find such a folder.) and one or more parameter files. The parameter files
contain the parameters or parameter ranges for a specific study, e.g. to mimick a setup found in a
paper. Combined, the templated case and a parameter file can be used to setup a study or a specific
test case configuration using *pyFoamRunParameterVariation* from the PyFoam library.
Note that some of the test cases make use of so-called derived-parameters, e.g. if the time step
size is a dependent parameter. The functions for computing the derived parameters are implemented
in such a way that they give precedence to values explicitly given in a parameter file. This
prevents unintended overwriting of parameters.

## Scripts for running and cleaning up parameter studies

### Make the scripts available on the command line
Scripts for simplifying the usage of the test cases are located in
*lent-validation-cases/scripts*. There is a bashrc file you can source so the scripts become
available in the shell.
For the hydrodynamic test cases, there are currently two relevant scripts,
*runParameterStudy.sh* and *clearParameterStudy.sh*. Their usage is described in the
following.

### runParameterStudy.sh
Script to run a complete study or to setup a single variation of a parameter study.
Expects 2 or 3 arguments:
* 1: mesh type, either 'block' for a Cartesian hex mesh or 'poly' for a poly mesh  
    set up using cfMesh. (Specify the keywords without quotation marks).
    NOTE: currently, only block mesh are working.
* 2: name of the parameter file to be used
* 3 (optional): variation number corresponding to a parameter set of the given
    parameter file (use the '--list-variations' option of pyFoamRunParameterVariation.py
    to get the list of variations.)

If only two arguments are provided, the entire study is setup and run. In case the third
argument is also provided, the specified case variant is setup, but no solver is executed.

### clearParameterStudy.sh
Script to clean up files and folders generated by a parameter study. Expects one argument:
* 1: Either the name of a parameter file of a parameter study, the key word 'dirs' or the
    key word 'all' (without quotation marks). If a parameter file name is given, only the folders belonging
    to this study and the files generated by PyFoam are removed, but no dat files are touched.
    If 'dirs' is given, all directories generated by parameter studies are removed, but no result files
    are touched.
    Given the 'all' key word, the script will remove all folders of all parameter studies, the
    PyFoam generated files and also dat-files and csv-files.
